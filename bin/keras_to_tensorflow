#!/usr/bin/env python
import sys

from model_converters import KerasToTensorflow

if __name__ == '__main__':
    if len(sys.argv) != 3 or not (sys.argv[1].endswith('.h5') or sys.argv[1].endswith('.hdf5')):
        print('Usage: keras_to_tensorflow <hdf5_model_file> <output_dir> <feature_layer>')
        sys.exit(1)

    if sys.argv[3]:
        KerasToTensorflow.convert(sys.argv[1], sys.argv[2], feature_layer=sys.argv[3])
    else:
        KerasToTensorflow.convert(sys.argv[1], sys.argv[2])
